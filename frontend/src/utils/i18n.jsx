import { useState, useEffect, createContext, useContext } from 'react';

const translations = {
  en: {
    // Common
    appName: 'PyStart',
    appTagline: 'Learn Python the Kazakh way',
    student: 'Student',
    teacher: 'Teacher',
    logout: 'Logout',
    save: 'Save',
    cancel: 'Cancel',
    create: 'Create',
    delete: 'Delete',
    edit: 'Edit',
    close: 'Close',
    loading: 'Loading...',
    saving: 'Saving...',
    sending: 'Sending...',
    notFound: 'Not found',
    noData: 'No data yet',
    actions: 'Actions',

    // Auth
    welcomeBack: 'Welcome Back',
    signInSubtitle: 'Sign in to your account',
    signIn: 'Sign In',
    signingIn: 'Signing in...',
    createAccount: 'Create Account',
    registerSubtitle: 'Start your Python journey with PyStart',
    creating: 'Creating...',
    username: 'Username',
    password: 'Password',
    fullName: 'Full Name',
    gradeClass: 'Grade / Class',
    role: 'Role',
    noAccount: "Don't have an account?",
    register: 'Register',
    haveAccount: 'Already have an account?',

    // Sidebar - Student
    dashboard: 'Dashboard',
    lessons: 'Lessons',
    tests: 'Tests',
    codeTasks: 'Code Tasks',
    leaderboard: 'Leaderboard',
    aiHelper: 'AI Helper',
    statistics: 'Statistics',
    inbox: 'Inbox',

    // Sidebar - Teacher
    students: 'Students',
    analytics: 'Analytics',
    feedback: 'Feedback',
    export: 'Export',

    // Student Dashboard
    welcome: 'Welcome',
    level: 'Level',
    totalPoints: 'Total Points',
    progress: 'Progress',
    streak: 'Streak',
    days: 'days',
    grade: 'Grade',
    myBadges: 'My Badges',
    continueLearning: 'Continue Learning',
    lessonsRemaining: 'lessons remaining',
    takeTest: 'Take a Test',
    testYourKnowledge: 'Test your knowledge with quizzes',

    // Lessons
    theoryLessons: 'Theory Lessons',
    backToLessons: 'Back to Lessons',
    watchVideo: 'Watch Video',
    markCompleted: 'Mark as Completed',
    lessonCompleted: 'Lesson completed! +10 points',
    badgeUnlocked: 'New badge unlocked!',

    // Tests
    questions: 'questions',
    notAttempted: 'Not attempted yet',
    bestScore: 'Best score',
    submitTest: 'Submit Test',
    submitting: 'Submitting...',
    answerAll: 'Please answer all questions',
    score: 'Score',
    percentage: 'Percentage',
    time: 'Time',
    wrongAnswersReview: 'Wrong Answers Review',
    yourAnswer: 'Your answer',
    correct: 'Correct',
    backToTests: 'Back to Tests',
    question: 'Question',
    selectMatch: 'Match each item on the left with the correct item on the right',
    select: 'Select...',
    results: 'Results',

    // Code Tasks
    codeEditor: 'Code Editor',
    run: 'Run',
    running: 'Running...',
    submit: 'Submit',
    checking: 'Checking...',
    output: 'Output',
    testResults: 'Test Results',
    passed: 'PASSED',
    failed: 'FAILED',
    testCases: 'test cases',
    input: 'Input',
    expected: 'Expected',
    got: 'Got',

    // Leaderboard
    rank: 'Rank',
    name: 'Name',
    points: 'Points',

    // Chat
    aiPythonHelper: 'AI Python Helper',
    askAboutPython: 'Ask me anything about Python!',
    typeMessage: 'Ask about Python...',
    send: 'Send',

    // Statistics
    myStatistics: 'My Statistics',
    completedLessons: 'Completed Lessons',
    testScoresOverTime: 'Test Scores Over Time',
    performanceByModule: 'Performance by Module',

    // Inbox
    noMessages: 'No messages yet',

    // Messenger
    messenger: 'Messenger',
    directMessages: 'Direct',
    groupChat: 'Group',
    classChat: 'Class Chat',
    classChatDesc: 'Chat with your classmates and teacher',
    selectContact: 'Select a contact',
    typeYourMessage: 'Type a message...',
    noStudentsFound: 'No students found',
    attachFile: 'Attach file',
    voiceMessage: 'Voice message',
    recording: 'Recording...',
    fileTooBig: 'File too large (max 10MB)',
    microphoneError: 'Cannot access microphone',

    // Teacher Dashboard
    teacherDashboard: 'Teacher Dashboard',
    totalStudents: 'Total Students',
    averageScore: 'Average Score',
    recentActivity: 'Recent Activity',
    date: 'Date',

    // Teacher Students
    studentManagement: 'Student Management',
    allGrades: 'All Grades',
    avgTestScore: 'Avg Score',
    weakTopics: 'Weak Topics',
    recentTests: 'Recent Tests',

    // Teacher CMS
    lessonsCMS: 'Lessons CMS',
    module: 'Module',
    order: 'Order',
    video: 'Video',
    content: 'Content (Markdown)',
    imageUrl: 'Image URL',
    videoUrl: 'Video URL',
    editLesson: 'Edit Lesson',
    createLesson: 'Create Lesson',
    moduleTitle: 'Module title:',

    // Teacher Tests
    testsManagement: 'Tests Management',
    newTest: 'New Test',
    createNewTest: 'Create New Test',
    difficulty: 'Difficulty',
    easy: 'Easy',
    medium: 'Medium',
    hard: 'Hard',
    addQuestion: 'Add Question',
    questionType: 'Question type',
    mcq: 'Multiple Choice',
    findBug: 'Find the Bug',
    chooseCode: 'Choose Code',
    matching: 'Matching',
    questionText: 'Question Text',
    options: 'Options (one per field)',
    correctAnswer: 'Correct Answer',
    explanation: 'Explanation',
    createTest: 'Create Test',
    addAtLeastOne: 'Add at least one question',

    // Teacher Code Tasks
    codeTasksTitle: 'Code Tasks',
    newTask: 'New Task',
    createCodeTask: 'Create Code Task',
    description: 'Description (Markdown)',
    starterCode: 'Starter Code',
    testCasesJson: 'Test Cases (JSON array)',
    testCaseFormat: 'Format: [{"input": "...", "expected_output": "..."}, ...]',

    // Teacher Code Task Templates
    useTemplate: 'Use Template',
    templateBasic: 'Basic I/O',
    templateString: 'String Processing',
    templateList: 'List Operations',
    templateMath: 'Math Problem',
    customTask: 'Custom Task',

    // AI Generation
    aiGenerateTest: 'Generate with AI',
    aiGenerateTestDesc: 'AI will create questions based on module and difficulty',
    aiGenerateLesson: 'Generate with AI',
    aiGenerateLessonDesc: 'AI will write a complete lesson with examples and exercises',
    aiGenerateTask: 'Generate with AI',
    aiGenerateTaskDesc: 'AI will create a coding task with test cases',
    aiGenerated: 'AI content generated successfully!',
    generating: 'Generating...',
    generate: 'Generate',
    enterTopic: 'Enter lesson topic:',
    addCase: 'Add Case',

    // Analytics
    analyticsTitle: 'Analytics',
    avgScoreByModule: 'Average Score by Module',
    weakTopicsLowest: 'Weak Topics (Lowest Scores)',
    attempts: 'Attempts',
    avgScore: 'Avg Score',
    avgProgress: 'Avg Progress',
    totalGrades: 'Grades',
    gradeOverview: 'Performance by Grade',
    studentsCount: 'students',
    studentPerformance: 'Student Performance',
    showAll: 'Show All',
    testHistory: 'Test History',
    noTests: 'No tests taken yet',

    // Export preview
    showPreview: 'Preview Report',
    hidePreview: 'Hide Preview',
    reportPreview: 'Report Preview',

    // Feedback
    studentFeedback: 'Student Feedback',
    sendFeedback: 'Send Feedback',
    selectStudent: 'Select student...',
    yourFeedback: 'Your feedback...',
    sentMessages: 'Sent Messages',
    noFeedback: 'No feedback sent yet',
    read: 'Read',
    unread: 'Unread',
    feedbackSent: 'Feedback sent',
    selectStudentAndMessage: 'Select a student and type a message',

    // Export
    madeInKZ: 'Made in Kazakhstan',
    noActivityYet: 'No activity yet',
    noTestsAvailable: 'No tests available yet',
    test: 'Test',
    lessonsLabel: 'Lessons',
    levelBeginner: 'Beginner',
    levelIntermediate: 'Intermediate',
    levelAdvanced: 'Advanced',
    noCodeTasksAvailable: 'No coding tasks available yet',
    noStudentsYet: 'No students yet',
    best: 'Best',
    exportReports: 'Export Reports',
    csvReport: 'CSV Report',
    csvDesc: 'Download student data as a CSV spreadsheet. Includes names, grades, points, progress, and average scores.',
    downloadCSV: 'Download CSV',
    pdfReport: 'PDF Report',
    pdfDesc: 'Download a formatted PDF report with student performance data. Ready for printing or sharing.',
    downloadPDF: 'Download PDF',
  },

  ru: {
    appName: 'PyStart',
    appTagline: 'Учи Python по-казахстански',
    student: 'Студент',
    teacher: 'Учитель',
    logout: 'Выйти',
    save: 'Сохранить',
    cancel: 'Отмена',
    create: 'Создать',
    delete: 'Удалить',
    edit: 'Редактировать',
    close: 'Закрыть',
    loading: 'Загрузка...',
    saving: 'Сохранение...',
    sending: 'Отправка...',
    notFound: 'Не найдено',
    noData: 'Пока нет данных',
    actions: 'Действия',

    welcomeBack: 'Добро пожаловать',
    signInSubtitle: 'Войдите в свой аккаунт',
    signIn: 'Войти',
    signingIn: 'Вход...',
    createAccount: 'Регистрация',
    registerSubtitle: 'Начни изучение Python с PyStart',
    creating: 'Создание...',
    username: 'Логин',
    password: 'Пароль',
    fullName: 'Полное имя',
    gradeClass: 'Класс',
    role: 'Роль',
    noAccount: 'Нет аккаунта?',
    register: 'Регистрация',
    haveAccount: 'Уже есть аккаунт?',

    dashboard: 'Главная',
    lessons: 'Уроки',
    tests: 'Тесты',
    codeTasks: 'Задачи',
    leaderboard: 'Рейтинг',
    aiHelper: 'AI Помощник',
    statistics: 'Статистика',
    inbox: 'Входящие',
    students: 'Ученики',
    analytics: 'Аналитика',
    feedback: 'Обратная связь',
    export: 'Экспорт',

    welcome: 'Добро пожаловать',
    level: 'Уровень',
    totalPoints: 'Баллы',
    progress: 'Прогресс',
    streak: 'Серия',
    days: 'дней',
    grade: 'Класс',
    myBadges: 'Мои значки',
    continueLearning: 'Продолжить обучение',
    lessonsRemaining: 'уроков осталось',
    takeTest: 'Пройти тест',
    testYourKnowledge: 'Проверьте свои знания',

    theoryLessons: 'Теоретические уроки',
    backToLessons: 'Назад к урокам',
    watchVideo: 'Смотреть видео',
    markCompleted: 'Отметить как пройденный',
    lessonCompleted: 'Урок пройден! +10 баллов',
    badgeUnlocked: 'Новый значок получен!',

    questions: 'вопросов',
    notAttempted: 'Ещё не пройден',
    bestScore: 'Лучший результат',
    submitTest: 'Отправить тест',
    submitting: 'Отправка...',
    answerAll: 'Ответьте на все вопросы',
    score: 'Балл',
    percentage: 'Процент',
    time: 'Время',
    wrongAnswersReview: 'Обзор ошибок',
    yourAnswer: 'Ваш ответ',
    correct: 'Правильный',
    backToTests: 'Назад к тестам',
    question: 'Вопрос',
    selectMatch: 'Сопоставьте элементы слева с правильными элементами справа',
    select: 'Выберите...',
    results: 'Результаты',

    codeEditor: 'Редактор кода',
    run: 'Запустить',
    running: 'Запуск...',
    submit: 'Отправить',
    checking: 'Проверка...',
    output: 'Вывод',
    testResults: 'Результаты тестов',
    passed: 'ПРОЙДЕН',
    failed: 'ОШИБКА',
    testCases: 'тест-кейсов',
    input: 'Ввод',
    expected: 'Ожидалось',
    got: 'Получено',

    rank: 'Место',
    name: 'Имя',
    points: 'Баллы',

    aiPythonHelper: 'AI Помощник по Python',
    askAboutPython: 'Спросите меня о Python!',
    typeMessage: 'Спросите о Python...',
    send: 'Отправить',

    myStatistics: 'Моя статистика',
    completedLessons: 'Пройденные уроки',
    testScoresOverTime: 'Результаты тестов',
    performanceByModule: 'Результаты по модулям',

    noMessages: 'Пока нет сообщений',

    // Messenger
    messenger: 'Мессенджер',
    directMessages: 'Личные',
    groupChat: 'Группа',
    classChat: 'Чат класса',
    classChatDesc: 'Общайтесь с одноклассниками и учителем',
    selectContact: 'Выберите контакт',
    typeYourMessage: 'Введите сообщение...',
    noStudentsFound: 'Ученики не найдены',
    attachFile: 'Прикрепить файл',
    voiceMessage: 'Голосовое сообщение',
    recording: 'Запись...',
    fileTooBig: 'Файл слишком большой (макс. 10МБ)',
    microphoneError: 'Нет доступа к микрофону',

    teacherDashboard: 'Панель учителя',
    totalStudents: 'Всего учеников',
    averageScore: 'Средний балл',
    recentActivity: 'Последняя активность',
    date: 'Дата',

    studentManagement: 'Управление учениками',
    allGrades: 'Все классы',
    avgTestScore: 'Ср. балл',
    weakTopics: 'Слабые темы',
    recentTests: 'Последние тесты',

    lessonsCMS: 'Управление уроками',
    module: 'Модуль',
    order: 'Порядок',
    video: 'Видео',
    content: 'Содержание (Markdown)',
    imageUrl: 'URL изображения',
    videoUrl: 'URL видео (YouTube)',
    editLesson: 'Редактировать урок',
    createLesson: 'Создать урок',
    moduleTitle: 'Название модуля:',

    testsManagement: 'Управление тестами',
    newTest: 'Новый тест',
    createNewTest: 'Создать новый тест',
    difficulty: 'Сложность',
    easy: 'Лёгкий',
    medium: 'Средний',
    hard: 'Сложный',
    addQuestion: 'Добавить вопрос',
    questionType: 'Тип вопроса',
    mcq: 'Выбор ответа',
    findBug: 'Найти ошибку',
    chooseCode: 'Выбрать код',
    matching: 'Сопоставление',
    questionText: 'Текст вопроса',
    options: 'Варианты (по одному)',
    correctAnswer: 'Правильный ответ',
    explanation: 'Объяснение',
    createTest: 'Создать тест',
    addAtLeastOne: 'Добавьте хотя бы один вопрос',

    codeTasksTitle: 'Задачи с кодом',
    newTask: 'Новая задача',
    createCodeTask: 'Создать задачу',
    description: 'Описание (Markdown)',
    starterCode: 'Начальный код',
    testCasesJson: 'Тест-кейсы (JSON массив)',
    testCaseFormat: 'Формат: [{"input": "...", "expected_output": "..."}, ...]',

    useTemplate: 'Шаблон',
    templateBasic: 'Базовый ввод/вывод',
    templateString: 'Обработка строк',
    templateList: 'Работа со списками',
    templateMath: 'Математика',
    customTask: 'Своя задача',

    // AI Generation
    aiGenerateTest: 'Сгенерировать с ИИ',
    aiGenerateTestDesc: 'ИИ создаст вопросы по модулю и сложности',
    aiGenerateLesson: 'Сгенерировать с ИИ',
    aiGenerateLessonDesc: 'ИИ напишет полный урок с примерами и упражнениями',
    aiGenerateTask: 'Сгенерировать с ИИ',
    aiGenerateTaskDesc: 'ИИ создаст задачу с тест-кейсами',
    aiGenerated: 'Контент успешно сгенерирован!',
    generating: 'Генерация...',
    generate: 'Сгенерировать',
    enterTopic: 'Введите тему урока:',
    addCase: 'Добавить кейс',

    analyticsTitle: 'Аналитика',
    avgScoreByModule: 'Средний балл по модулям',
    weakTopicsLowest: 'Слабые темы (наименьшие баллы)',
    attempts: 'Попыток',
    avgScore: 'Средний балл',
    avgProgress: 'Средний прогресс',
    totalGrades: 'Классы',
    gradeOverview: 'Успеваемость по классам',
    studentsCount: 'учеников',
    studentPerformance: 'Успеваемость учеников',
    showAll: 'Показать всех',
    testHistory: 'История тестов',
    noTests: 'Тесты ещё не пройдены',
    showPreview: 'Предпросмотр отчёта',
    hidePreview: 'Скрыть предпросмотр',
    reportPreview: 'Предпросмотр отчёта',

    studentFeedback: 'Обратная связь',
    sendFeedback: 'Отправить сообщение',
    selectStudent: 'Выберите ученика...',
    yourFeedback: 'Ваше сообщение...',
    sentMessages: 'Отправленные сообщения',
    noFeedback: 'Сообщений пока нет',
    read: 'Прочитано',
    unread: 'Не прочитано',
    feedbackSent: 'Сообщение отправлено',
    selectStudentAndMessage: 'Выберите ученика и введите сообщение',

    madeInKZ: 'Сделано в Казахстане',
    noActivityYet: 'Пока нет активности',
    noTestsAvailable: 'Пока нет доступных тестов',
    test: 'Тест',
    lessonsLabel: 'Уроки',
    levelBeginner: 'Начинающий',
    levelIntermediate: 'Средний',
    levelAdvanced: 'Продвинутый',
    noCodeTasksAvailable: 'Пока нет задач по программированию',
    noStudentsYet: 'Пока нет учеников',
    best: 'Лучший',
    exportReports: 'Экспорт отчётов',
    csvReport: 'CSV отчёт',
    csvDesc: 'Скачайте данные учеников в формате CSV. Включает имена, классы, баллы, прогресс и средние оценки.',
    downloadCSV: 'Скачать CSV',
    pdfReport: 'PDF отчёт',
    pdfDesc: 'Скачайте оформленный PDF отчёт с данными успеваемости учеников.',
    downloadPDF: 'Скачать PDF',
  },

  kz: {
    appName: 'PyStart',
    appTagline: 'Python-ды қазақша үйрен',
    student: 'Оқушы',
    teacher: 'Мұғалім',
    logout: 'Шығу',
    save: 'Сақтау',
    cancel: 'Бас тарту',
    create: 'Құру',
    delete: 'Жою',
    edit: 'Өзгерту',
    close: 'Жабу',
    loading: 'Жүктелуде...',
    saving: 'Сақталуда...',
    sending: 'Жіберілуде...',
    notFound: 'Табылмады',
    noData: 'Деректер жоқ',
    actions: 'Әрекеттер',

    welcomeBack: 'Қош келдіңіз',
    signInSubtitle: 'Аккаунтыңызға кіріңіз',
    signIn: 'Кіру',
    signingIn: 'Кіру...',
    createAccount: 'Тіркелу',
    registerSubtitle: 'PyStart-пен Python үйренуді бастаңыз',
    creating: 'Құрылуда...',
    username: 'Логин',
    password: 'Құпия сөз',
    fullName: 'Толық аты-жөні',
    gradeClass: 'Сынып',
    role: 'Рөл',
    noAccount: 'Аккаунтыңыз жоқ па?',
    register: 'Тіркелу',
    haveAccount: 'Аккаунтыңыз бар ма?',

    dashboard: 'Басты бет',
    lessons: 'Сабақтар',
    tests: 'Тесттер',
    codeTasks: 'Тапсырмалар',
    leaderboard: 'Рейтинг',
    aiHelper: 'AI Көмекші',
    statistics: 'Статистика',
    inbox: 'Хабарламалар',
    students: 'Оқушылар',
    analytics: 'Аналитика',
    feedback: 'Кері байланыс',
    export: 'Экспорт',

    welcome: 'Қош келдіңіз',
    level: 'Деңгей',
    totalPoints: 'Жалпы ұпай',
    progress: 'Прогресс',
    streak: 'Серия',
    days: 'күн',
    grade: 'Сынып',
    myBadges: 'Менің белгілерім',
    continueLearning: 'Оқуды жалғастыру',
    lessonsRemaining: 'сабақ қалды',
    takeTest: 'Тест тапсыру',
    testYourKnowledge: 'Білімдеріңізді тексеріңіз',

    theoryLessons: 'Теориялық сабақтар',
    backToLessons: 'Сабақтарға оралу',
    watchVideo: 'Бейнені көру',
    markCompleted: 'Аяқталды деп белгілеу',
    lessonCompleted: 'Сабақ аяқталды! +10 ұпай',
    badgeUnlocked: 'Жаңа белгі алынды!',

    questions: 'сұрақ',
    notAttempted: 'Әлі тапсырылмаған',
    bestScore: 'Ең жақсы нәтиже',
    submitTest: 'Тестті жіберу',
    submitting: 'Жіберілуде...',
    answerAll: 'Барлық сұрақтарға жауап беріңіз',
    score: 'Ұпай',
    percentage: 'Пайыз',
    time: 'Уақыт',
    wrongAnswersReview: 'Қателерді талдау',
    yourAnswer: 'Сіздің жауабыңыз',
    correct: 'Дұрыс жауап',
    backToTests: 'Тесттерге оралу',
    question: 'Сұрақ',
    selectMatch: 'Сол жақтағы элементтерді оң жақтағылармен сәйкестендіріңіз',
    select: 'Таңдаңыз...',
    results: 'Нәтижелер',

    codeEditor: 'Код редакторы',
    run: 'Іске қосу',
    running: 'Жұмыс істеуде...',
    submit: 'Жіберу',
    checking: 'Тексерілуде...',
    output: 'Нәтиже',
    testResults: 'Тест нәтижелері',
    passed: 'ӨТТІ',
    failed: 'ҚАТЕ',
    testCases: 'тест-кейс',
    input: 'Кіріс',
    expected: 'Күтілген',
    got: 'Алынған',

    rank: 'Орын',
    name: 'Аты',
    points: 'Ұпай',

    aiPythonHelper: 'AI Python Көмекшісі',
    askAboutPython: 'Python туралы кез келген сұрақ қойыңыз!',
    typeMessage: 'Python туралы сұраңыз...',
    send: 'Жіберу',

    myStatistics: 'Менің статистикам',
    completedLessons: 'Аяқталған сабақтар',
    testScoresOverTime: 'Тест нәтижелері',
    performanceByModule: 'Модульдер бойынша нәтижелер',

    noMessages: 'Хабарламалар жоқ',

    // Messenger
    messenger: 'Мессенджер',
    directMessages: 'Жеке',
    groupChat: 'Топ',
    classChat: 'Сынып чаты',
    classChatDesc: 'Сыныптастарыңызбен және мұғаліммен сөйлесіңіз',
    selectContact: 'Контактты таңдаңыз',
    typeYourMessage: 'Хабарлама жазыңыз...',
    noStudentsFound: 'Оқушылар табылмады',
    attachFile: 'Файл тіркеу',
    voiceMessage: 'Дауыстық хабарлама',
    recording: 'Жазылуда...',
    fileTooBig: 'Файл тым үлкен (макс. 10МБ)',
    microphoneError: 'Микрофонға қол жетімді емес',

    teacherDashboard: 'Мұғалім панелі',
    totalStudents: 'Жалпы оқушылар',
    averageScore: 'Орташа ұпай',
    recentActivity: 'Соңғы белсенділік',
    date: 'Күні',

    studentManagement: 'Оқушыларды басқару',
    allGrades: 'Барлық сыныптар',
    avgTestScore: 'Орт. ұпай',
    weakTopics: 'Әлсіз тақырыптар',
    recentTests: 'Соңғы тесттер',

    lessonsCMS: 'Сабақтарды басқару',
    module: 'Модуль',
    order: 'Реті',
    video: 'Бейне',
    content: 'Мазмұны (Markdown)',
    imageUrl: 'Сурет URL',
    videoUrl: 'Бейне URL (YouTube)',
    editLesson: 'Сабақты өзгерту',
    createLesson: 'Сабақ құру',
    moduleTitle: 'Модуль атауы:',

    testsManagement: 'Тесттерді басқару',
    newTest: 'Жаңа тест',
    createNewTest: 'Жаңа тест құру',
    difficulty: 'Күрделілігі',
    easy: 'Жеңіл',
    medium: 'Орташа',
    hard: 'Қиын',
    addQuestion: 'Сұрақ қосу',
    questionType: 'Сұрақ түрі',
    mcq: 'Таңдамалы',
    findBug: 'Қатені табу',
    chooseCode: 'Код таңдау',
    matching: 'Сәйкестендіру',
    questionText: 'Сұрақ мәтіні',
    options: 'Нұсқалар (әрбірі бөлек)',
    correctAnswer: 'Дұрыс жауап',
    explanation: 'Түсіндірме',
    createTest: 'Тест құру',
    addAtLeastOne: 'Кем дегенде бір сұрақ қосыңыз',

    codeTasksTitle: 'Код тапсырмалары',
    newTask: 'Жаңа тапсырма',
    createCodeTask: 'Тапсырма құру',
    description: 'Сипаттама (Markdown)',
    starterCode: 'Бастапқы код',
    testCasesJson: 'Тест-кейстер (JSON массив)',
    testCaseFormat: 'Формат: [{"input": "...", "expected_output": "..."}, ...]',

    useTemplate: 'Шаблон',
    templateBasic: 'Базалық енгізу/шығару',
    templateString: 'Жолдармен жұмыс',
    templateList: 'Тізіммен жұмыс',
    templateMath: 'Математика',
    customTask: 'Өз тапсырмасы',

    // AI Generation
    aiGenerateTest: 'ЖИ арқылы жасау',
    aiGenerateTestDesc: 'ЖИ модуль мен қиындыққа байланысты сұрақтар жасайды',
    aiGenerateLesson: 'ЖИ арқылы жасау',
    aiGenerateLessonDesc: 'ЖИ мысалдар мен тапсырмалармен толық сабақ жазады',
    aiGenerateTask: 'ЖИ арқылы жасау',
    aiGenerateTaskDesc: 'ЖИ тест-кейстермен тапсырма жасайды',
    aiGenerated: 'Контент сәтті жасалды!',
    generating: 'Жасалуда...',
    generate: 'Жасау',
    enterTopic: 'Сабақ тақырыбын енгізіңіз:',
    addCase: 'Кейс қосу',

    analyticsTitle: 'Аналитика',
    avgScoreByModule: 'Модульдер бойынша орташа ұпай',
    weakTopicsLowest: 'Әлсіз тақырыптар',
    attempts: 'Тапсырылды',
    avgScore: 'Орташа ұпай',
    avgProgress: 'Орташа прогресс',
    totalGrades: 'Сыныптар',
    gradeOverview: 'Сыныптар бойынша үлгерім',
    studentsCount: 'оқушы',
    studentPerformance: 'Оқушылар үлгерімі',
    showAll: 'Барлығын көрсету',
    testHistory: 'Тест тарихы',
    noTests: 'Тесттер әлі тапсырылмаған',
    showPreview: 'Есепті алдын ала көру',
    hidePreview: 'Жасыру',
    reportPreview: 'Есепті алдын ала көру',

    studentFeedback: 'Кері байланыс',
    sendFeedback: 'Хабарлама жіберу',
    selectStudent: 'Оқушыны таңдаңыз...',
    yourFeedback: 'Хабарламаңыз...',
    sentMessages: 'Жіберілген хабарламалар',
    noFeedback: 'Хабарламалар жоқ',
    read: 'Оқылды',
    unread: 'Оқылмады',
    feedbackSent: 'Хабарлама жіберілді',
    selectStudentAndMessage: 'Оқушыны таңдаңыз және хабарлама жазыңыз',

    madeInKZ: 'Қазақстанда жасалған',
    noActivityYet: 'Әзірше белсенділік жоқ',
    noTestsAvailable: 'Әзірше қолжетімді тесттер жоқ',
    test: 'Тест',
    lessonsLabel: 'Сабақтар',
    levelBeginner: 'Бастауыш',
    levelIntermediate: 'Орта',
    levelAdvanced: 'Жоғары',
    noCodeTasksAvailable: 'Әзірше код тапсырмалары жоқ',
    noStudentsYet: 'Әзірше оқушылар жоқ',
    best: 'Ең жақсы',
    exportReports: 'Есептерді экспорттау',
    csvReport: 'CSV есеп',
    csvDesc: 'Оқушылардың деректерін CSV форматында жүктеңіз.',
    downloadCSV: 'CSV жүктеу',
    pdfReport: 'PDF есеп',
    pdfDesc: 'Оқушылардың үлгерімі туралы PDF есепті жүктеңіз.',
    downloadPDF: 'PDF жүктеу',
  },
};

const LangContext = createContext();

export function LangProvider({ children }) {
  const [lang, setLang] = useState(() => localStorage.getItem('lang') || 'en');

  useEffect(() => {
    localStorage.setItem('lang', lang);
  }, [lang]);

  const t = (key) => translations[lang]?.[key] || translations.en[key] || key;

  return (
    <LangContext.Provider value={{ lang, setLang, t }}>
      {children}
    </LangContext.Provider>
  );
}

export function useLang() {
  return useContext(LangContext);
}

export function useT() {
  const { t } = useContext(LangContext);
  return t;
}
